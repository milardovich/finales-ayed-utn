Este final era bastante similar al de cartas navideñas tomado anteriormente. Hay que tener en cuenta las reglas de negocio al momento de generar el pedido: tener en cuenta que primero hay que confirmar el monto, y luego ver si hay stock suficiente. Una vez que se pasen ambas confirmaciones recién ahí se resta el stock. Si se confirma el monto pero no hay stock, hay que sumarle la cantidad pedida a la cantidad pendiente a pedir.

Por último, no hace falta guardar el número de pieza como un campo dentro del registro, ya que el enunciado explicita que es autoincremental. De todos modos, se recomienda utilizar algún procedimiento de tipo "helper" que nos sirva para posicionarnos justo en la pieza que necesitamos. Nótese lo que hice en posicionarseEnPieza(nroPieza), y los comentarios respectivos en el código. 